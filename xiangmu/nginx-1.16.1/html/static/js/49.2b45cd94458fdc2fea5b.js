webpackJsonp([49],{"7ZMg":function(e,t){},qmCy:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("BO1k"),l=s.n(a),o=s("5g4Q"),i=s("1Wvq"),n=s.n(i),r=s("T8Lg"),c={name:"paperMsg",data:function(){return{loading:!0,isPost:!1,curtab:0,tabNameList:["基本信息","标引信息","版权信息","作者信息","参考文献","关联资源"],cname:"",curIndex:"",classifyList:"",checkedClass:"",props:{label:"name",children:"zones"},introduceList:[{label:"是",value:1},{label:"否",value:0}],curClass:"",count:1,activeName:"0",isshowTree:!1,role:"",isshowHis:!1,book:{fieldTypeMap:{basics:{},indexings:{},copyright:{}}},resourceTypeCode:"",authorList:[],fileList:[],hisList:[],hisType:!1,bookId:"",files:[],dialogVisible:!1,authorMsg:{name:"",erpidCode:"",ssapId:"",role:"著",more:!1},deleteTag:!1,newKeyWdText:"",keyWordCn:[],keyWordEn:[],themeKeyWords:[],eleCopyright:[{label:"是",value:"是"},{label:"否",value:"否"},{label:"待查",value:"待查"},{label:"公版书",value:"公版书"},{label:"待确定",value:"待确定"}],accreditPubWay:[{label:"图书",value:"图书"},{label:"期刊",value:"期刊"},{label:"电子出版物",value:"电子出版物"},{label:"信息网络",value:"信息网络"}],authorityZone:[{label:"中国内地",value:"中国内地"},{label:"香港地区",value:"香港地区"},{label:"澳门地区",value:"澳门地区"},{label:"台湾地区",value:"台湾地区"},{label:"其他国家和地区",value:"其他国家和地区"}],selectedRefrenceList:[],referenceList:[],themeVisible:!1,themeValue:"",cnVisible:!1,cnValue:"",enVisible:!1,enValue:"",treeNodeCheckes:[],authPublishModel:[],authArea:[]}},components:{FileUpload:n.a,loadingTip:r.a},mixins:[o.a],methods:{handleClose:function(e,t){1==e&&this.themeKeyWords.splice(this.themeKeyWords.indexOf(t),1),2==e&&this.keyWordCn.splice(this.keyWordCn.indexOf(t),1),3==e&&this.keyWordEn.splice(this.keyWordEn.indexOf(t),1)},showInput:function(e){var t=this;1==e&&(this.themeVisible=!0,this.$nextTick(function(e){t.$refs.themeInput.$refs.input.focus()})),2==e&&(this.cnVisible=!0,this.$nextTick(function(e){t.$refs.cnInput.$refs.input.focus()})),3==e&&(this.enVisible=!0,this.$nextTick(function(e){t.$refs.enInput.$refs.input.focus()}))},handleInputConfirm:function(e){1==e&&(this.themeValue&&this.themeKeyWords.push(this.themeValue),this.themeVisible=!1,this.themeValue=""),2==e&&(this.cnValue&&this.keyWordCn.push(this.cnValue),this.cnVisible=!1,this.cnValue=""),3==e&&(this.enValue&&this.keyWordEn.push(this.enValue),this.enVisible=!1,this.enValue="")},handleCheckChange:function(e,t,s){this.checkedClass=e},duringDate:function(){if(this.book.contractStartDate&&this.book.contractEndDate){var e=+this.book.contractStartDate.split("-")[0],t=+this.book.contractStartDate.split("-")[1],s=12*(+this.book.contractEndDate.split("-")[0]-e)+ +this.book.contractEndDate.split("-")[1]-t;0==s&&(s=1),s<0&&(s=0),this.book.contractSignDate=s+" 个月 "}},inputFile:function(e,t){e&&t&&(e.error,t.error,e.success!==t.success&&(this.$message.success("上传成功！"),this.getResourceFileList())),Boolean(e)===Boolean(t)&&t.error===e.error||this.$refs.upload.active||(this.$refs.upload.active=!0)},tree:function(e,t){if(this.isshowTree=!0,this.curClass=e,this.cname=e.name,this.curIndex=t,e.classifies){this.treeNodeCheckes=[];var s=!0,a=!1,o=void 0;try{for(var i,n=l()(e.classifies);!(s=(i=n.next()).done);s=!0){var r=i.value;this.treeNodeCheckes.push(r.id)}}catch(e){a=!0,o=e}finally{try{!s&&n.return&&n.return()}finally{if(a)throw o}}}},closeDialog:function(e){if(this.isshowTree=!1,1==e){var t=[];this.$refs.tree.getCheckedNodes().forEach(function(e){t.push(e.name)}),this.book.classifyMappingList[this.curIndex].selectedName=t,this.book.classifyMappingList[this.curIndex].classifies=this.$refs.tree.getCheckedNodes()}},checkedDataHandle:function(e,t){if(0==t.selectedName.length)t.selectedName=[];else if(t.selectedName.indexOf(e.name)>=0)t.classifies.push(e);else{for(var s=-1,a=0;a<t.classifies.length;a++)t.classifies[a].name==e.name&&(s=a);s>-1&&t.classifies.splice(s,1)}},removeTag:function(e,t){if(0==t.selectedName.length)t.selectedName=[];else{for(var s=-1,a=0;a<t.classifies.length;a++)t.classifies[a].name==e&&(s=a);s>-1&&t.classifies.splice(s,1)}},getTreeNode:function(e,t){var s=this,a=e.data?e.data:s.curClass;s.$http({method:"get",url:"/admin/cms/classify/child",params:{classifyMappingId:a.classifyMappingId,parentId:a.id==a.classifyMappingId?"":a.id},headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){s.classifyList=e.data.classifyList,s.classifyList.children=[],t(e.data.classifyList)})},download:function(e,t){document.getElementById("downBtn").href=t.path,document.getElementById("downBtn").click()},deleteRow:function(e,t){var s=this;s.$http({method:"post",url:"/admin/cms/attachment/delete",data:{id:t.id},transformRequest:[function(e){var t="";for(var s in e)t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(e){0==e.data.code&&(s.$message({message:"删除成功！",type:"success"}),s.getResourceFileList())})},historyFile:function(){this.isshowHis=!0,this.getResourceFileList()},getResourceFileList:function(){var e=this;e.$http({method:"get",url:"/admin/cms/attachment/list",params:{resourceId:e.bookId},headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(t){e.hisList=t.data.attachmentHistoryList,e.fileList=t.data.attachmentList})},selectRefrence:function(e){this.selectedRefrenceList=e},addNewRef:function(e){var t=this;if(0==e)this.book.referenceList.push({updateInfo:"",isOrigin:"new",status:0,id:"",indexId:this.book.referenceList.length});else{if(0==this.selectedRefrenceList.length)return void this.$message.error("请先选择要删除的数据！");var s=function(e){var s=t.book.referenceList.findIndex(function(t,s,a){return t.id?t.id==e.id:t.indexId==e.indexId});"origin"==t.book.referenceList[s].isOrigin&&(t.book.referenceList[s].status=1,t.referenceList.push(t.book.referenceList[s])),t.book.referenceList.splice(s,1)},a=!0,o=!1,i=void 0;try{for(var n,r=l()(this.selectedRefrenceList);!(a=(n=r.next()).done);a=!0){s(n.value)}}catch(e){o=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw i}}}},moreMsg:function(e,t){this.book.authorList[t].more=0==e},popAuthorMsg:function(){this.dialogVisible=!0,this.authorMsg={name:"",erpidCode:"",ssapId:"",role:"",abstracts:"",more:!1}},removeAuthor:function(e,t){this.book.authorList.splice(t,1)},saveAuthor:function(){""!=this.authorMsg.name&&""!=this.authorMsg.role?(this.dialogVisible=!1,this.book.authorList.push(this.authorMsg)):this.$message.error("作者和责任方式为必填！")},addAuthor:function(e,t){1==e?this.book.authorList.push({name:"",erpidCode:"",ssapId:"",role:"著",abstracts:""}):this.book.authorList.splice(t,1)},addEditor:function(e,t){1==e?this.book.editorList.push({name:"",role:""}):this.book.editorList.splice(t,1)},saveBook:function(){this.isPost=!0,this.deleteTag=!1;var e=this,t=e.book.id?"/admin/cms/articleresource/update":"/admin/cms/articleresource/save";e.book.referenceList.concat(e.referenceList),e.book.themeKeywords=e.themeKeyWords.join(";"),e.book.keyWordCn=e.keyWordCn.join(";"),e.book.keyWordEn=e.keyWordEn.join(";"),e.book.authArea=e.authArea.join(";"),e.book.authPublishModel=e.authPublishModel.join(";"),e.$http({method:"post",url:t,data:e.book,headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){0==t.data.code&&(e.book.id=t.data.id,e.$message({message:"保存成功！",type:"success"})),e.isPost=!1})},getEditeBookMsg:function(){var e=this;e.loading=!0,e.$http({method:"get",url:"/admin/cms/articleresource/info/"+e.bookId,headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){var s=!0,a=!1,o=void 0;try{for(var i,n=l()(t.data.articleResource.authorList);!(s=(i=n.next()).done);s=!0){i.value.more=!1}}catch(e){a=!0,o=e}finally{try{!s&&n.return&&n.return()}finally{if(a)throw o}}e.book=t.data.articleResource,t.data.articleResource.themeKeywords&&(e.themeKeyWords=t.data.articleResource.themeKeywords.split(";")),t.data.articleResource.keyWordCn&&(e.keyWordCn=t.data.articleResource.keyWordCn.split(";")),t.data.articleResource.keyWordEn&&(e.keyWordEn=t.data.articleResource.keyWordEn.split(";")),e.book.authArea&&(e.authArea=e.book.authArea.split(";")),e.book.authPublishModel&&(e.authPublishModel=e.book.authPublishModel.split(";")),e.loading=!1})},searchType:function(e,t){t.objects=[],this.$http({method:"get",url:"/admin/cms/classify/children",params:{classifyMappingId:t.id,q:e},headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){t.objects=e.data.classifyList})}},mounted:function(){document.getElementsByClassName("el-tabs__content")[0].style.maxHeight=document.body.clientHeight-220+50+"px"},created:function(){this.$route.query.addOredite;this.resourceTypeCode=this.$route.query.type,this.bookId=this.$route.query.id,this.getEditeBookMsg(),this.getResourceFileList()}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"rt_cont"},[s("div",{staticStyle:{padding:"10px 0",background:"#F0F2F5"}},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/main/adminManageHome"}}},[e._v("首页")]),e._v(" "),s("el-breadcrumb-item",[e._v("论文管理")])],1)],1),e._v(" "),s("div",{staticClass:"nrgl"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"navTab"},[e._l(e.tabNameList,function(t,a){return s("a",{key:t,class:{active:e.curtab==a},on:{click:function(t){e.changeTab(a)}}},[e._v(e._s(t))])}),e._v(" "),s("a",{staticStyle:{display:"none"},attrs:{id:"scrollTag",href:""}},[e._v("go")])],2),e._v(" "),s("loading-tip",{attrs:{"show-load":e.loading}}),e._v(" "),s("el-tabs",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"tabmsg",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{name:"0"}},[s("div",{staticClass:"msg",attrs:{id:"tab0"}},[s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("标题")])]),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.book.title,callback:function(t){e.$set(e.book,"title",t)},expression:"book.title"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("英文标题")])]),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.book.titleEn,callback:function(t){e.$set(e.book,"titleEn",t)},expression:"book.titleEn"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("语种")])]),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.book.language,callback:function(t){e.$set(e.book,"language",t)},expression:"book.language"}})],1)],1),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("DOI")])]),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.book.doi,callback:function(t){e.$set(e.book,"doi",t)},expression:"book.doi"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("刊名")])]),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.book.journalName,callback:function(t){e.$set(e.book,"journalName",t)},expression:"book.journalName"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("卷期")])]),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.book.volumeNumber,callback:function(t){e.$set(e.book,"volumeNumber",t)},expression:"book.volumeNumber"}})],1)],1),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("年")])]),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.book.yearNumber,callback:function(t){e.$set(e.book,"yearNumber",t)},expression:"book.yearNumber"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("期")])]),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.book.periodsNumber,callback:function(t){e.$set(e.book,"periodsNumber",t)},expression:"book.periodsNumber"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("页")])]),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.book.pageNumber,callback:function(t){e.$set(e.book,"pageNumber",t)},expression:"book.pageNumber"}})],1)],1),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("页数")])]),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.book.pagesNumber,callback:function(t){e.$set(e.book,"pagesNumber",t)},expression:"book.pagesNumber"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("出版社")])]),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.book.publisher,callback:function(t){e.$set(e.book,"publisher",t)},expression:"book.publisher"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("出版年份")])]),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.book.publishYear,callback:function(t){e.$set(e.book,"publishYear",t)},expression:"book.publishYear"}})],1)],1),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("内容简介")])]),e._v(" "),s("el-col",{attrs:{span:19}},[s("el-input",{attrs:{size:"small",type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:e.book.introduction,callback:function(t){e.$set(e.book,"introduction",t)},expression:"book.introduction"}})],1)],1),e._v(" "),s("div",{staticClass:"tabName",attrs:{id:"tab1"}},[s("span",[e._v("标引信息")])]),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("h5",{staticClass:"msgTitle"},[e._v("主题词")])]),e._v(" "),s("el-col",{attrs:{span:16}},[e._l(e.themeKeyWords,function(t){return s("el-tag",{key:t,staticClass:"kwdTag",attrs:{closable:"","disable-transitions":!1},on:{close:function(s){e.handleClose(1,t)}}},[e._v("\n                              "+e._s(t)+"\n                          ")])}),e._v(" "),e.themeVisible?s("el-input",{ref:"themeInput",staticClass:"input-new-tag width120",attrs:{size:"mini"},on:{blur:function(t){e.handleInputConfirm(1)}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleInputConfirm(1)}},model:{value:e.themeValue,callback:function(t){e.themeValue=t},expression:"themeValue"}}):s("a",{staticClass:"aBtn aBtnCancle slctBtn",on:{click:function(t){e.showInput(1)}}},[e._v("+新增")])],2)],1),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("h5",{staticClass:"msgTitle"},[e._v("中文关键词")])]),e._v(" "),s("el-col",{attrs:{span:16}},[e._l(e.keyWordCn,function(t){return s("el-tag",{key:t,staticClass:"kwdTag",attrs:{closable:"","disable-transitions":!1},on:{close:function(s){e.handleClose(2,t)}}},[e._v("\n                              "+e._s(t)+"\n                          ")])}),e._v(" "),e.cnVisible?s("el-input",{ref:"cnInput",staticClass:"input-new-tag width120",attrs:{size:"mini"},on:{blur:function(t){e.handleInputConfirm(2)}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleInputConfirm(2)}},model:{value:e.cnValue,callback:function(t){e.cnValue=t},expression:"cnValue"}}):s("a",{staticClass:"aBtn aBtnCancle slctBtn",on:{click:function(t){e.showInput(2)}}},[e._v("+新增")])],2)],1),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("h5",{staticClass:"msgTitle"},[e._v("英文关键词")])]),e._v(" "),s("el-col",{attrs:{span:16}},[e._l(e.keyWordEn,function(t){return s("el-tag",{key:t,staticClass:"kwdTag",attrs:{closable:"","disable-transitions":!1},on:{close:function(s){e.handleClose(3,t)}}},[e._v("\n                              "+e._s(t)+"\n                          ")])}),e._v(" "),e.enVisible?s("el-input",{ref:"enInput",staticClass:"input-new-tag width120",attrs:{size:"mini"},on:{blur:function(t){e.handleInputConfirm(3)}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleInputConfirm(3)}},model:{value:e.enValue,callback:function(t){e.enValue=t},expression:"enValue"}}):s("a",{staticClass:"aBtn aBtnCancle slctBtn",on:{click:function(t){e.showInput(3)}}},[e._v("+新增")])],2)],1),e._v(" "),s("el-row",{attrs:{gutter:10}},e._l(e.book.classifyMappingList,function(t,a){return s("el-col",{directives:[{name:"show",rawName:"v-show",value:"tslx"!=t.code&&"ts"!=t.code&&"syzt"!=t.code&&"cplb"!=t.code,expression:"iterm.code!='tslx'&&iterm.code!='ts'&&iterm.code!='syzt'&&iterm.code!='cplb'"}],key:t.code,staticClass:"typeTitle",attrs:{span:24}},[s("el-col",{attrs:{span:4}},[s("h5",{staticClass:"msgTitle"},[e._v(e._s(t.name))])]),e._v(" "),s("el-col",{attrs:{span:19}},[s("el-select",{staticClass:"typeSelectWd tswd",attrs:{size:"small",multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入内容","remote-method":function(s){return e.searchType(s,t)}},on:{"remove-tag":function(s){return e.removeTag(s,t)}},model:{value:t.selectedName,callback:function(s){e.$set(t,"selectedName",s)},expression:"iterm.selectedName"}},e._l(t.objects,function(a){return s("el-option",{key:a.id,attrs:{label:a.name,value:a.name},nativeOn:{click:function(s){e.checkedDataHandle(a,t)}}})})),e._v(" "),s("a",{staticClass:"aBtn aBtnCancle slctBtn ",on:{click:function(s){e.tree(t,a)}}},[e._v("选择")])],1)],1)})),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("h5",{staticClass:"msgTitle"},[e._v("中文摘要")])]),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{size:"small",type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:e.book.abstracts,callback:function(t){e.$set(e.book,"abstracts",t)},expression:"book.abstracts"}})],1)],1),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("h5",{staticClass:"msgTitle"},[e._v("英文摘要")])]),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{size:"small",type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:e.book.abstractsEn,callback:function(t){e.$set(e.book,"abstractsEn",t)},expression:"book.abstractsEn"}})],1)],1),e._v(" "),s("div",{staticClass:"tabName",attrs:{id:"tab2"}},[s("span",[e._v("版权信息")])]),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("h5",{staticClass:"msgTitle"},[e._v("是否有电子版权")])]),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-select",{staticClass:"typeSelect",attrs:{placeholder:"请选择",size:"small"},model:{value:e.book.isElectronicCopyright,callback:function(t){e.$set(e.book,"isElectronicCopyright",t)},expression:"book.isElectronicCopyright"}},e._l(e.eleCopyright,function(e){return s("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("h5",{staticClass:"msgTitle"},[e._v("授权区域")])]),e._v(" "),s("el-col",{attrs:{span:10}},[s("el-select",{staticClass:"typeSelect",attrs:{multiple:"",placeholder:"请选择",size:"small"},model:{value:e.authArea,callback:function(t){e.authArea=t},expression:"authArea"}},e._l(e.authorityZone,function(e){return s("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("h5",{staticClass:"msgTitle"},[e._v("是否允许第三方销售电子书")])]),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-select",{staticClass:"typeSelect",attrs:{placeholder:"请选择",size:"small"},model:{value:e.book.allowThirdSellElectronic,callback:function(t){e.$set(e.book,"allowThirdSellElectronic",t)},expression:"book.allowThirdSellElectronic"}},e._l(e.introduceList,function(e){return s("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("h5",{staticClass:"msgTitle"},[e._v("授权出版方式")])]),e._v(" "),s("el-col",{attrs:{span:10}},[s("el-select",{staticClass:"typeSelect",attrs:{multiple:"",placeholder:"请选择",size:"small"},model:{value:e.authPublishModel,callback:function(t){e.authPublishModel=t},expression:"authPublishModel"}},e._l(e.accreditPubWay,function(e){return s("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("h5",{staticClass:"msgTitle"},[e._v("合同签订日期")])]),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-date-picker",{staticClass:"dateWd",attrs:{size:"small",type:"date",placeholder:"请选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:e.duringDate},model:{value:e.book.contractStartDate,callback:function(t){e.$set(e.book,"contractStartDate",t)},expression:"book.contractStartDate"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("合同失效日期")])]),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-date-picker",{staticClass:"dateWd",attrs:{size:"small",type:"date",placeholder:"请选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:e.duringDate},model:{value:e.book.contractEndDate,callback:function(t){e.$set(e.book,"contractEndDate",t)},expression:"book.contractEndDate"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("合同有效期")])]),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{staticClass:"dateWd",attrs:{size:"small",readonly:!0,placeholder:"请输入内容"},model:{value:e.book.contractSignDate,callback:function(t){e.$set(e.book,"contractSignDate",t)},expression:"book.contractSignDate"}})],1)],1),e._v(" "),s("el-row",{staticClass:"typeTitle",attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("h5",{staticClass:"msgTitle"},[e._v("授权备注")])]),e._v(" "),s("el-col",{attrs:{span:17}},[s("el-input",{attrs:{size:"small",type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:e.book.authNotes,callback:function(t){e.$set(e.book,"authNotes",t)},expression:"book.authNotes"}})],1)],1),e._v(" "),s("div",{staticClass:"tabName",attrs:{id:"tab3"}},[s("span",[e._v("作者信息")])]),e._v(" "),s("div",{staticStyle:{padding:"0 10px"}},e._l(e.book.authorList,function(t,a){return s("el-tag",{key:t.id,staticClass:"kwdTag",staticStyle:{margin:"0 6px 6px 0"},attrs:{closable:e.deleteTag},on:{close:function(s){e.removeAuthor(t,a)}}},[e._v("\n                          "+e._s(t.name)+"("+e._s(t.role)+")\n                      ")])})),e._v(" "),e._l(e.book.authorList,function(t){return s("el-row",{key:t.id,staticClass:"typeTitle card",attrs:{gutter:10}},[s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("作者名称")])]),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.name,callback:function(s){e.$set(t,"name",s)},expression:"iterm.name"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("著作方式")])]),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.role,callback:function(s){e.$set(t,"role",s)},expression:"iterm.role"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("ERP_code")])]),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.erpidCode,callback:function(s){e.$set(t,"erpidCode",s)},expression:"iterm.erpidCode"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("h5",{staticClass:"msgTitle"},[e._v("SSAPID")])]),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.ssapId,callback:function(s){e.$set(t,"ssapId",s)},expression:"iterm.ssapId"}})],1)],1)}),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:0==e.book.authorList,expression:"book.authorList==0"}],staticStyle:{"text-align":"center","margin-bottom":"25px"}},[e._v("暂无相关作者，如需要请先添加！")]),e._v(" "),s("div",{staticClass:"tabName",attrs:{id:"tab4"}},[s("span",[e._v("参考文献")])]),e._v(" "),s("el-table",{staticClass:"ckwx",staticStyle:{width:"100%"},attrs:{data:e.book.referenceList,border:""},on:{"selection-change":e.selectRefrence}},[s("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),s("el-table-column",{attrs:{label:"标题",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.row.title,callback:function(s){e.$set(t.row,"title",s)},expression:"scope.row.title"}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"作者",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.row.author,callback:function(s){e.$set(t.row,"author",s)},expression:"scope.row.author"}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"参考文献"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.row.info,callback:function(s){e.$set(t.row,"info",s)},expression:"scope.row.info"}})]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:e.cname,visible:e.isshowTree,width:"30%"},on:{"update:visible":function(t){e.isshowTree=t}}},[s("div",{staticStyle:{"max-height":"600px",overflow:"auto","padding-bottom":"20px"}},[e.isshowTree?s("el-tree",{ref:"tree",attrs:{props:e.props,load:e.getTreeNode,lazy:"","show-checkbox":"","node-key":"id","default-checked-keys":e.treeNodeCheckes},on:{"check-change":e.handleCheckChange}}):e._e()],1),e._v(" "),s("span",{staticClass:"dialog-footer",staticStyle:{display:"block","text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[s("a",{staticClass:"aBtn",on:{click:function(t){e.closeDialog(1)}}},[e._v("确 定")]),e._v(" "),s("a",{staticClass:"aBtn aBtnCancle",on:{click:function(t){e.closeDialog(0)}}},[e._v("取 消")])])])],2)]),e._v(" "),s("el-tab-pane",{attrs:{name:"9"}},[s("div",{staticClass:"msg"},[s("div",{staticStyle:{width:"90%"}},[s("h5",{staticClass:"popTitle"},[e._v("\n                          关联资源列表"),s("a",{directives:[{name:"show",rawName:"v-show",value:!e.isshowHis,expression:"!isshowHis"}],staticClass:"fr import",on:{click:e.historyFile}},[e._v("历史文件")])]),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fileList,border:""}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),s("el-table-column",{attrs:{prop:"propStr",label:"上传人"}}),e._v(" "),s("el-table-column",{attrs:{prop:"path",label:"存放地址"}}),e._v(" "),s("el-table-column",{attrs:{prop:"updateTime",label:"上传时间",width:"160"}}),e._v(" "),s("el-table-column",{attrs:{prop:"suffix",label:"类型",width:"70"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("a",{staticStyle:{color:"#409EFF"},on:{click:function(s){e.download(t.$index,t.row)}}},[e._v("下载 ")])]}}])})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isshowHis,expression:"isshowHis"}]},[s("h5",{staticClass:"popTitle"},[e._v("\n                              历史文件  "),s("a",{staticClass:"fr import",on:{click:function(t){e.isshowHis=!e.isshowHis}}},[e._v("隐藏")])]),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.hisList,border:""}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:"名称","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{prop:"suffix",label:"类型",width:"70"}}),e._v(" "),s("el-table-column",{attrs:{prop:"propStr",label:"上传人"}}),e._v(" "),s("el-table-column",{attrs:{prop:"updateTime",label:"上传时间",width:"160"}}),e._v(" "),s("el-table-column",{attrs:{prop:"path",label:"存放地址","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{prop:"address",label:"操作 ",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("a",{staticStyle:{color:"#409EFF"},on:{click:function(s){e.download(t.$index,t.row)}}},[e._v("下载 ")])]}}])})],1)],1),e._v(" "),s("a",{staticStyle:{display:"none"},attrs:{href:"#",download:"",id:"downBtn"}},[e._v("同为下载")])],1)])])],1),e._v(" "),s("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("div",{staticStyle:{"margin-top":"-30px"}},[s("h5",{staticClass:"popTitle"},[e._v("作者名称"),s("span",{staticStyle:{color:"red","font-size":"12px"}},[e._v("（必填）")])]),e._v(" "),s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.authorMsg.name,callback:function(t){e.$set(e.authorMsg,"name",t)},expression:"authorMsg.name"}}),e._v(" "),s("h5",{staticClass:"popTitle"},[e._v("著作方式"),s("span",{staticStyle:{color:"red","font-size":"12px"}},[e._v("（必填）")])]),e._v(" "),s("el-input",{attrs:{size:"small",placeholder:"请输入内容如：著"},model:{value:e.authorMsg.role,callback:function(t){e.$set(e.authorMsg,"role",t)},expression:"authorMsg.role"}}),e._v(" "),s("h5",{staticClass:"popTitle"},[e._v("ERP_code")]),e._v(" "),s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.authorMsg.erpidCode,callback:function(t){e.$set(e.authorMsg,"erpidCode",t)},expression:"authorMsg.erpidCode"}}),e._v(" "),s("h5",{staticClass:"popTitle"},[e._v("SSAPID")]),e._v(" "),s("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.authorMsg.ssapId,callback:function(t){e.$set(e.authorMsg,"ssapId",t)},expression:"authorMsg.ssapId"}})],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("a",{staticClass:"aBtn aBtnCancle",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("a",{staticClass:"aBtn",on:{click:e.saveAuthor}},[e._v("确 定")])])])],1)])},staticRenderFns:[]};var d=s("VU/8")(c,u,!1,function(e){s("7ZMg")},"data-v-30ba1724",null);t.default=d.exports}});