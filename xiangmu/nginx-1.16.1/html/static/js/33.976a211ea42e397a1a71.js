webpackJsonp([33],{K31e:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"login",data:function(){return{acounte:"",pwd:"",codeNum:"",codeImg:"",isLogin:!0,inputTitle:!0,fontColor:!1,errorTip:!1,errorText:"",isRem:"",ssoCount:0}},methods:{refreshCode:function(){this.codeImg="/admin/captcha.jpg?t="+(new Date).getTime()},changeFontColor:function(e){this.inputTitle=0==e,this.fontColor=!0},blurFontColor:function(e){this.fontColor=!1},closetip:function(){this.errorTip=!1},login:function(){var e=this;if(""==e.acounte.trim()||""==e.pwd.trim())return e.errorTip=!0,void(e.errorText="账号或密码必填！");e.$http({method:"post",url:"/admin/sys/login",data:{username:e.acounte,password:e.pwd},transformRequest:[function(e){var t="";for(var o in e)t+=encodeURIComponent(o)+"="+encodeURIComponent(e[o])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){console.log(1111),console.log(t.data),0==t.data.code?(e.isRem?(localStorage.setItem("isRem",!0),localStorage.setItem("username",e.acounte),localStorage.setItem("password",e.pwd)):(localStorage.removeItem("isRem"),localStorage.removeItem("username"),localStorage.removeItem("password")),window.sessionStorage.getItem("fromUrl")?window.location.href=window.sessionStorage.getItem("fromUrl"):e.$router.push({path:"/home"})):(e.errorTip=!0,e.errorText=t.data.msg)})},ssoLogin:function(){var e=window.location.href;if(e.indexOf("ticket")>-1){var t=e.split("ticket")[1].split("=")[1],o=this;o.$http({method:"get",url:"/admin/sys/ssologin",params:{ticket:t},headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){0==e.data.code&&o.$router.push({path:"/home"})})}}},created:function(){localStorage.getItem("isRem")&&(this.isRem=!0,this.acounte=localStorage.getItem("username"),this.pwd=localStorage.getItem("password")),this.ssoLogin()}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"bg_img"},[o("div",{staticClass:"cont clear-fix"},[o("div",{staticClass:"login"},[o("h3",{staticClass:"title"},[e._v("\n                登录账号\n                "),o("div",{staticClass:"errorTip"},[o("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.errorTip,expression:"errorTip"}],staticStyle:{"line-height":"6px"},attrs:{title:e.errorText,type:"error","show-icon":""},on:{close:e.closetip}})],1)]),e._v(" "),o("p",{staticClass:"inputTitle"},[o("span",{directives:[{name:"show",rawName:"v-show",value:e.inputTitle&&e.fontColor,expression:"inputTitle&&fontColor"}],class:{active:e.fontColor}},[e._v("账号")])]),e._v(" "),o("el-input",{staticClass:"iterm",attrs:{placeholder:"请输入账号"},on:{blur:function(t){e.blurFontColor(0)},focus:function(t){e.changeFontColor(0)}},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}},model:{value:e.acounte,callback:function(t){e.acounte=t},expression:"acounte"}}),e._v(" "),o("p",{staticClass:"inputTitle"},[o("span",{directives:[{name:"show",rawName:"v-show",value:!e.inputTitle&&e.fontColor,expression:"!inputTitle&&fontColor"}],class:{active:e.fontColor}},[e._v("密码")])]),e._v(" "),o("el-input",{staticClass:"iterm",attrs:{type:"password",placeholder:"请输入密码"},on:{blur:function(t){e.blurFontColor(1)},focus:function(t){e.changeFontColor(1)}},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:"pwd"}}),e._v(" "),o("el-checkbox",{staticClass:"remberMe",attrs:{label:"true"},model:{value:e.isRem,callback:function(t){e.isRem=t},expression:"isRem"}},[e._v("记住我")]),e._v(" "),o("el-button",{staticClass:"iterm lbtn",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)])])},staticRenderFns:[]};var i=o("VU/8")(n,r,!1,function(e){o("hRuB")},"data-v-8afba99a",null);t.default=i.exports},hRuB:function(e,t){}});