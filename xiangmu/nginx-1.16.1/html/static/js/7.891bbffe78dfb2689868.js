webpackJsonp([7],{HWYd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"pictureManage",data:function(){return{loading:!1,pageTitle:"图片管理",dialog:!1,curPage:1,total:0,limit:14,startDate:"",endDate:"",bookList:[],searchWord:"",bookTitle:"",author:"",sourceType:"",order:"",imgurl:"",imgTitle:"",resourceTypeCode:"picture",permision:"",sidx:""}},watch:{$route:"init"},components:{loadingTip:a("T8Lg").a},methods:{clear:function(){this.searchWord="",this.bookTitle="",this.startDate="",this.endDate="",this.curPage=1,this.getPictureList()},dateFormat:function(t,e,a,i){if(a)return a.split(" ")[0]},handleCurrentChange:function(t){this.curPage=t,this.getPictureList()},sortbydate:function(t,e,a){this.sidx=t.prop,this.order="ascending"==t.order?"asc":"desc",this.getPictureList()},lookDetail:function(t){"picture"==t.resourceTypeCode?this.$router.push({path:"/main/pictureManage/lookPictureDetail",query:{id:t.id,type:"picture"}}):this.$router.push({path:"/main/chartManage/lookPictureDetail",query:{id:t.id,type:"chart"}})},update:function(t){"picture"==t.resourceTypeCode?this.$router.push({path:"/main/pictureManage/addPictureChart",query:{id:t.id,type:"picture"}}):this.$router.push({path:"/main/chartManage/addPictureChart",query:{id:t.id,type:"chart"}})},imgview:function(t){t.url?(this.dialog=!0,this.imgTitle=t.title,this.imgurl=t.url):this.$message.error("暂时没有可预览的图片！")},searchPicture:function(){this.curPage=1,this.getPictureList()},getPictureList:function(){var t=this;t.loading=!0,t.$http({method:"get",url:"/admin/cms/picturechart/list",params:{page:t.curPage,limit:t.limit,resourceTypeCode:t.resourceTypeCode,title:t.searchWord,bookTitle:t.bookTitle,startDate:""==t.startDate?null:t.startDate,endDate:""==t.endDate?null:t.endDate,sidx:t.sidx,order:t.order},headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(e){0==e.data.code&&(t.total=e.data.page.totalCount,t.bookList=e.data.page.list),t.loading=!1})},paramsDataReset:function(){this.curPage=1,this.searchWord="",this.startDate="",this.endDate=""},init:function(){this.permision=sessionStorage.getItem("permission"),this.resourceTypeCode=this.$route.meta.type,this.pageTitle="picture"==this.$route.query.type?"图片管理":"图表管理",this.paramsDataReset(),this.getPictureList()}},created:function(){this.init()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rt_cont"},[a("div",{staticStyle:{padding:"10px 0",background:"#F0F2F5"}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/main/adminManageHome"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v(t._s(t.pageTitle))])],1)],1),t._v(" "),a("div",{staticClass:"nrgl"},[a("div",{staticClass:"btnhandle"},[a("div",{staticClass:"pagett"},[a("span",[t._v(t._s(t.pageTitle))])]),t._v(" "),a("loading-tip",{attrs:{"show-load":t.loading}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.bookList,"tooltip-effect":"dark"},on:{"sort-change":t.sortbydate}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题",width:"250","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"hover_color",on:{click:function(a){t.lookDetail(e.row)}}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bookTitle",label:"所属图书",width:"200","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{staticClass:"hover_color",attrs:{to:{path:"/main/bookManage/addResource",query:{addOredite:"1",type:"book",id:e.row.bookResourceId}}}},[t._v(t._s(e.row.bookTitle))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"articleTitle",label:"所属章节",width:"220","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{domProps:{innerHTML:t._s(e.row.articleTitle)}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"picType",label:"类型",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"入库时间",sortable:!0,formatter:t.dateFormat,width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",sortable:!0,formatter:t.dateFormat,width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lastEditor",label:"最后编辑人",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[(t.resourceTypeCode,a("div",[a("a",{staticStyle:{color:"#409EFF"},on:{click:function(a){t.lookDetail(e.row)}}},[t._v("查看")]),t._v(" "),a("span",[t._v("|")]),t._v(" "),a("a",{staticStyle:{color:"#409EFF"},on:{click:function(a){t.update(e.row)}}},[t._v("修改")]),t._v(" "),a("span",[t._v("|")]),t._v(" "),"xlsx"==e.row.picType||"xls"==e.row.picType?a("a",{staticStyle:{color:"#409EFF"},attrs:{href:"/admin/cms/attachment/downloadByUrl?url="+e.row.url}},[t._v("下载")]):a("a",{staticStyle:{color:"#409EFF"},on:{click:function(a){t.imgview(e.row)}}},[t._v("预览")])]))]}}])})],1),t._v(" "),a("div",{staticClass:"page"},[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.curPage,"page-size":t.limit,total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.curPage=e}}})],1)])],1),t._v(" "),a("div",{staticClass:"upldbtn"},["picture"==t.resourceTypeCode?a("el-input",{staticClass:"inputsc bknameInput",attrs:{size:"mini",placeholder:"请输入图片标题"},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}}):t._e(),t._v(" "),"picture"!=t.resourceTypeCode?a("el-input",{staticClass:"inputsc bknameInput",attrs:{size:"mini",placeholder:"请输入图表标题"},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}}):t._e(),t._v(" "),a("el-input",{staticClass:"inputsc bknameInput",attrs:{size:"mini",placeholder:"请输入所属图书名称"},model:{value:t.bookTitle,callback:function(e){t.bookTitle=e},expression:"bookTitle"}}),t._v(" "),a("el-date-picker",{staticClass:"inputsc",attrs:{size:"mini",type:"date",placeholder:"更新时间",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v(" "),a("span",[t._v("至")]),t._v(" "),a("el-date-picker",{staticClass:"inputsc",attrs:{size:"mini",type:"date",placeholder:"更新时间",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),t._v(" "),a("a",{staticClass:"aBtn",on:{click:t.searchPicture}},[t._v("搜索")]),t._v(" "),a("a",{staticClass:"aBtn aBtnCancle",on:{click:t.clear}},[t._v("重置")])],1),t._v(" "),a("el-dialog",{staticStyle:{"min-width":"1000px"},attrs:{title:"",visible:t.dialog,width:"70%"},on:{"update:visible":function(e){t.dialog=e}}},[a("p",{staticClass:"imgtitle"},[t._v(t._s(t.imgTitle))]),t._v(" "),a("img",{staticStyle:{display:"block","max-width":"1000px",width:"92%",margin:"0 auto"},attrs:{src:t.imgurl,alt:""}})])],1)])])},staticRenderFns:[]};var o=a("VU/8")(i,r,!1,function(t){a("u3bA")},"data-v-39948571",null);e.default=o.exports},u3bA:function(t,e){}});