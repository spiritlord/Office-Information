webpackJsonp([55],{LZ0I:function(t,a){},"V/L4":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("BO1k"),s=e.n(i),n={name:"loginLog",data:function(){return{loading:!1,logType:"",curPage:1,total:0,limit:14,startDate:"",endDate:"",logList:[],statusList:[],author:"",sourceType:"",order:"desc",curClass:0,username:"",ip:"",dldUrl:""}},watch:{$route:"init"},components:{loadingTip:e("T8Lg").a},methods:{clear:function(){this.username="",this.ip="",this.startDate="",this.endDate="",this.search()},dld:function(){this.dldUrl="/admin/sys/loginlog/export?username="+this.username+"&ip="+this.ip+"&startDate="+this.startDate+"&endDate="+this.endDate,document.getElementById("dldIfram").setAttribute("src",this.dldUrl)},authorFormat:function(t,a,e,i){var n=[],r=!0,l=!1,o=void 0;try{for(var d,c=s()(t.authorList);!(r=(d=c.next()).done);r=!0){var u=d.value;n.push(u.name)}}catch(t){l=!0,o=t}finally{try{!r&&c.return&&c.return()}finally{if(l)throw o}}return n.join(" ")},handleCurrentChange:function(t){this.curPage=t,this.getLogList()},sortbydate:function(t,a,e){this.order="ascending"==t.order?"asc":"desc",this.getLogList()},search:function(){this.curPage=1,this.getLogList()},getLogList:function(){var t=this;t.loading=!0,t.$http({method:"get",url:"/admin/sys/loginlog/list",params:{page:t.curPage,limit:t.limit,order:t.order,sidx:"loginTime",username:t.username,ip:t.ip,startDate:""==t.startDate?null:t.startDate,endDate:""==t.endDate?null:t.endDate},headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(a){0==a.data.code&&(t.total=a.data.page.totalCount,t.logList=a.data.page.list),t.loading=!1})},init:function(){this.getLogList()}},created:function(){this.init()}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"rt_cont"},[e("div",{staticStyle:{padding:"10px 0",background:"#F0F2F5"}},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/main/adminManageHome"}}},[t._v("首页")]),t._v(" "),e("el-breadcrumb-item",[t._v("系统设置")])],1)],1),t._v(" "),e("div",{staticClass:"nrgl"},[e("div",{staticClass:"btnhandle"},[e("div",{staticClass:"handle"},[e("h5",{staticClass:"pagett"},[t._v("登录日志")]),t._v(" "),e("div",{staticClass:"upldbtn"},[e("el-input",{staticClass:"inputsc ",attrs:{size:"mini",placeholder:"请输入登录账号/姓名"},model:{value:t.username,callback:function(a){t.username=a},expression:"username"}}),t._v(" "),e("el-input",{staticClass:"inputsc",attrs:{size:"mini",placeholder:"请输入登录IP"},model:{value:t.ip,callback:function(a){t.ip=a},expression:"ip"}}),t._v(" "),e("el-date-picker",{staticClass:"inputsc",attrs:{size:"mini",type:"date",placeholder:"操作时间",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd"},model:{value:t.startDate,callback:function(a){t.startDate=a},expression:"startDate"}}),t._v(" "),e("span",[t._v("至")]),t._v(" "),e("el-date-picker",{staticClass:"inputsc",attrs:{size:"mini",type:"date",placeholder:"操作时间",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd"},model:{value:t.endDate,callback:function(a){t.endDate=a},expression:"endDate"}}),t._v(" "),e("a",{staticClass:"aBtn",on:{click:t.search}},[t._v("搜索")]),t._v(" "),e("a",{staticClass:"aBtn aBtnCancle",on:{click:t.clear}},[t._v("重置")])],1)]),t._v(" "),e("loading-tip",{attrs:{"show-load":t.loading}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"table"},[e("a",{staticClass:"aBtn",on:{click:t.dld}},[t._v("导出登录日志")]),t._v(" "),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.logList,"tooltip-effect":"dark","default-sort":{prop:"createDate",order:"descending"}},on:{"sort-change":t.sortbydate}},[e("el-table-column",{attrs:{type:"index",width:"100",label:"序号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"ip",label:"登录IP"}}),t._v(" "),e("el-table-column",{attrs:{prop:"username",label:"登录账号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"真实姓名"}}),t._v(" "),e("el-table-column",{attrs:{prop:"loginTime",label:"登录时间"}})],1),t._v(" "),e("div",{staticClass:"page"},[e("div",{staticClass:"fr"},[e("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.curPage,"page-size":t.limit,total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(a){t.curPage=a}}})],1)]),t._v(" "),e("iframe",{staticStyle:{display:"none"},attrs:{id:"dldIfram",src:"",frameborder:"0"}})],1)],1)])])},staticRenderFns:[]};var l=e("VU/8")(n,r,!1,function(t){e("LZ0I")},"data-v-1b44063d",null);a.default=l.exports}});