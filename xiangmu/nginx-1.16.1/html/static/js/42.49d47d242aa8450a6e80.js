webpackJsonp([42],{MW0t:function(t,e){},tl2w:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("BO1k"),s=a.n(r),o={name:"publishMsgManage",data:function(){return{publishId:"",curPage:1,resourceType:{book:"图书"},searchdate:[],total:0,bookList:[],searchWord:"",author:"",order:""}},methods:{clear:function(){this.searchWord="",this.searchdate=[],this.getBookList()},authorFormat:function(t,e,a,r){var o=[],l=!0,i=!1,n=void 0;try{for(var c,d=s()(t.authorList);!(l=(c=d.next()).done);l=!0){var u=c.value;o.push(u.name)}}catch(t){i=!0,n=t}finally{try{!l&&d.return&&d.return()}finally{if(i)throw n}}return o.join(" ")},handleCurrentChange:function(t){this.curPage=t,this.getBookList()},lookDetail:function(t){var e=this;e.$http.get("/admin/cms/publishinginformation/bind",{params:{id:e.publishId,bookId:t.id}}).then(function(t){0==t.data.code?(e.$message.success("绑定成功！"),e.getBookList()):e.$message.error(t.data.msg)})},sortbydate:function(t,e,a){this.order="desc"==this.order?"asc":"desc",this.getBookList()},getBookList:function(){var t=this;t.$http({method:"get",url:"/admin/cms/bookresource/list",params:{page:t.curPage,limit:12,resourceTypeCodeList:"book",title:t.searchWord,startDate:t.searchdate?t.searchdate[0]:null,endDate:t.searchdate?t.searchdate[1]:null,order:t.order},headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(e){0==e.data.code&&(t.total=e.data.page.totalCount,t.bookList=e.data.page.list)})}},created:function(){this.publishId=this.$route.query.id}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rt_cont"},[a("div",{staticStyle:{padding:"15px 0",background:"#F0F2F5"}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/main/adminManageHome"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/main/publishMsgManage/publishMsgDetail",query:{id:this.publishId}}}},[t._v("出版信息管理详情")]),t._v(" "),a("el-breadcrumb-item",[t._v("图书绑定")])],1)],1),t._v(" "),a("div",{staticClass:"nrgl"},[a("div",{staticClass:"btnhandle"},[a("div",{staticClass:"handle",staticStyle:{height:"40px","border-bottom":"2px solid #e4e7ed"}},[a("div",{staticClass:"upldbtn"},[a("el-input",{staticClass:"inputsc",attrs:{size:"medium",placeholder:"请输图书名"},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}}),t._v(" "),a("el-date-picker",{staticStyle:{width:"280px"},attrs:{size:"medium",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.searchdate,callback:function(e){t.searchdate=e},expression:"searchdate"}}),t._v(" "),a("el-button",{staticClass:"fr sbtn",attrs:{size:"medium",type:"primary",plain:""},on:{click:t.clear}},[t._v("重置")]),t._v(" "),a("el-button",{staticClass:"fr sbtn",attrs:{size:"medium",type:"primary"},on:{click:t.getBookList}},[t._v("搜索")])],1)]),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.bookList,"tooltip-effect":"dark","default-sort":{prop:"publishDate",order:"descending"}},on:{"sort-change":t.sortbydate}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"书名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{staticStyle:{color:"#606266"},attrs:{to:{path:"/main/bookManage/bookMsg",query:{addOredite:"1",type:"book1",id:e.row.id}}}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"issn",label:"ISBN"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pricePaper",label:"定价",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"作者",formatter:t.authorFormat}}),t._v(" "),a("el-table-column",{attrs:{prop:"seriesTitle",label:"丛书名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"publishDate",label:"出版日期",sortable:!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"图书类型"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticStyle:{color:"#409EFF"},on:{click:function(a){t.lookDetail(e.row)}}},[t._v("绑定")])]}}])})],1),t._v(" "),a("div",{staticClass:"page"},[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.curPage,"page-size":12,total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.curPage=e}}})],1)])],1)])])])},staticRenderFns:[]};var i=a("VU/8")(o,l,!1,function(t){a("MW0t")},"data-v-602f460d",null);e.default=i.exports}});